!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@angular/core"),require("rxjs"),require("@angular/common"),require("angular2parse"),require("@angular/platform-browser"),require("json-string-mapper"),require("primitive-primitives"));else if("function"==typeof define&&define.amd)define(["@angular/core","rxjs","@angular/common","angular2parse","@angular/platform-browser","json-string-mapper","primitive-primitives"],t);else{var r="object"==typeof exports?t(require("@angular/core"),require("rxjs"),require("@angular/common"),require("angular2parse"),require("@angular/platform-browser"),require("json-string-mapper"),require("primitive-primitives")):t(e["@angular/core"],e.rxjs,e["@angular/common"],e.angular2parse,e["@angular/platform-browser"],e["json-string-mapper"],e["primitive-primitives"]);for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,function(e,t,r,i,n,o,c){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,t,r){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=48)}([function(e,t){e.exports=require("@angular/core")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CesiumService=void 0;var i=r(0),n=r(28);t.CesiumService=function(){function e(e,t){this.ngZone=e,this.viewerFactory=t}return e.prototype.init=function(e){var t=this;this.ngZone.runOutsideAngular(function(){t.cesiumViewer=t.viewerFactory.createViewer(e)})},e.prototype.getViewer=function(){return this.cesiumViewer},e.prototype.getScene=function(){return this.cesiumViewer.scene},e.prototype.getMinimumZoom=function(){return this.getScene().screenSpaceCameraController.minimumZoomDistance},e.prototype.setMinimumZoom=function(e){this.getScene().screenSpaceCameraController.minimumZoomDistance=e},e.prototype.getMaximumZoom=function(){return this.getScene().screenSpaceCameraController.maximumZoomDistance},e.prototype.setMaximumZoom=function(e){this.getScene().screenSpaceCameraController.maximumZoomDistance=e},e.prototype.setEnableTilt=function(e){this.getScene().screenSpaceCameraController.enableTilt=e},e.prototype.morphTo2D=function(e){void 0===e&&(e=2),this.getScene().morphTo2D(e)},e.prototype.morphTo3D=function(e){void 0===e&&(e=2),this.getScene().morphTo3D(e)},e.prototype.morphToColumbusView=function(e){void 0===e&&(e=2),this.getScene().morphToColumbusView(e)},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:i.NgZone},{type:n.ViewerFactory}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerService=void 0;var i=r(0);t.LayerService=function(){function e(){this.descriptions=[]}return e.prototype.registerDescription=function(e){this.descriptions.push(e)},e.prototype.getDescriptions=function(){return this.descriptions},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CesiumProperties=void 0;var i=r(0),n=r(19),o=r(31);t.CesiumProperties=function(){function e(e,t){this._parser=e,this._jsonMapper=t,this._assignersCache=new Map,this._evaluatorsCache=new Map}return e.prototype._compile=function(e){var t=this,r=new Map,i=this._jsonMapper.map(e);i.forEach(function(e,i){return r.set(i,{expression:e,get:t._parser.eval(e)})});var n="const cesiumDesc={};for (let [propName, cesiumProp] of propsMap)cesiumDesc[propName ? propName : 'undefined'] = cache.get(cesiumProp.expression.toString(), ()=>propsMap.get(propName).get(context));return cesiumDesc;",o=new Function("propsMap","cache","context",n);return function(e,t){return o(r,e,t)}},e.prototype._build=function(e){var t="",r=this._jsonMapper.map(e);r.forEach(function(e,r){return t+="dst['"+r+"'] = src['"+r+"'];"}),t+="return dst;";var i=new Function("dst","src",""+t);return function(e,t){return i(e,t)}},e.prototype.createEvaluator=function(e){if(this._evaluatorsCache.has(e))return this._evaluatorsCache.get(e);var t=this._compile(e);return this._evaluatorsCache.set(e,t),t},e.prototype.createAssigner=function(e){if(this._assignersCache.has(e))return this._assignersCache.get(e);var t=this._build(e);return this._assignersCache.set(e,t),t},e.prototype.stringifyExpression=function(e){return"'"===e[0]&&"'"===e[e.length-1]?"`"+e+"`":"'"+e+"'"},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:o.Parse},{type:n.JsonMapper}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputationCache=void 0;var i=r(0);t.ComputationCache=function(){function e(){this._cache=new Map}return e.prototype.get=function(e,t){if(this._cache.has(e))return this._cache.get(e);var r=t();return this._cache.set(e,r),r},e.prototype.clear=function(){this._cache.clear()},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicDesc=void 0;var i=r(0);t.BasicDesc=function(){function e(e,t,r,i){this._drawer=e,this._layerService=t,this._computationCache=r,this._cesiumProperties=i,this._primitiveMap=new Map}return e.prototype._propsEvaluator=function(e){return this._propsEvaluateFn(this._computationCache,e)},e.prototype.ngOnInit=function(){this._layerService.registerDescription(this),this._propsEvaluateFn=this._cesiumProperties.createEvaluator(this.props),this._drawer.setPropsAssigner(this._cesiumProperties.createAssigner(this.props))},e.prototype.draw=function(e,t,r){var i=this._propsEvaluator(e);if(this._primitiveMap.has(t)){var n=this._primitiveMap.get(t);this._drawer.update(n,i)}else{var n=this._drawer.add(i);n.acEntity=r,this._primitiveMap.set(t,n)}},e.prototype.remove=function(e){var t=this._primitiveMap.get(e);this._drawer.remove(t),this._primitiveMap["delete"](e)},e.prototype.removeAll=function(){this._primitiveMap.clear(),this._drawer.removeAll()},e.propDecorators={props:[{type:i.Input}]},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SimpleDrawerService=function(){function e(e,t){this._showAll=!0,this._cesiumCollection=new e,t.getScene().primitives.add(this._cesiumCollection)}return e.prototype.setPropsAssigner=function(e){this._propsAssigner=e},e.prototype.add=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.show=this._showAll,this._cesiumCollection.add(e)},e.prototype.update=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];this._propsAssigner?this._propsAssigner(e,t):Object.assign(e,t)},e.prototype.remove=function(e){this._cesiumCollection.remove(e)},e.prototype.removeAll=function(){this._cesiumCollection.removeAll()},e.prototype.setShow=function(e){this._showAll=e;for(var t=0;t<this._cesiumCollection.length;t++){var r=this._cesiumCollection.get(t);r.show=e}},e}()},function(e,t){e.exports=require("rxjs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicStaticPrimitiveDesc=void 0;var i=r(0),n=r(5),o=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.BasicStaticPrimitiveDesc=function(e){function t(t,r,i,n){e.call(this,t,r,i,n),this._staticPrimitiveDrawer=t}return o(t,e),t.prototype.ngOnInit=function(){this._layerService.registerDescription(this),this._geometryPropsEvaluator=this._cesiumProperties.createEvaluator(this.geometryProps),this._instancePropsEvaluator=this._cesiumProperties.createEvaluator(this.instanceProps),this._primitivePropsEvaluator=this._cesiumProperties.createEvaluator(this.primitiveProps)},t.prototype.draw=function(e,t,r){var i=this._geometryPropsEvaluator(this._computationCache,e),n=this._instancePropsEvaluator(this._computationCache,e),o=this._primitivePropsEvaluator(this._computationCache,e);if(this._primitiveMap.has(t)){var c=this._primitiveMap.get(t);this._staticPrimitiveDrawer.update(c,i,n,o)}else{var c=this._staticPrimitiveDrawer.add(i,n,o);c.acEntity=r,this._primitiveMap.set(t,c)}},t.propDecorators={geometryProps:[{type:i.Input}],instanceProps:[{type:i.Input}],primitiveProps:[{type:i.Input}]},t}(n.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillboardDrawerService=void 0;var i=r(0),n=r(6),o=r(1),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.BillboardDrawerService=function(e){function t(t){e.call(this,Cesium.BillboardCollection,t)}return c(t,e),t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:o.CesiumService}]},t}(n.SimpleDrawerService)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaticPrimitiveDrawer=void 0;var i=r(6),n=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.StaticPrimitiveDrawer=function(e){function t(t,r){e.call(this,Cesium.PrimitiveCollection,r),this.geometryType=t}return n(t,e),t.prototype.add=function(t,r,i){return r.geometry=new this.geometryType(t),i.geometryInstances=new Cesium.GeometryInstance(r),e.prototype.add.call(this,new Cesium.Primitive(i))},t.prototype.update=function(e,t,r,i){},t}(i.SimpleDrawerService)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicEllipseDrawerService=void 0;var i=r(0),n=r(6),o=r(1),c=r(29),s=r(58),a=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.DynamicEllipseDrawerService=function(e){function t(t){e.call(this,Cesium.PrimitiveCollection,t)}return a(t,e),t.prototype.add=function(t){return c.Checker.throwIfAnyNotPresent(t,["center","semiMajorAxis","semiMinorAxis","rotation"]),e.prototype.add.call(this,new s.EllipsePrimitive(t))},t.prototype.update=function(e,t){return e.updateLocationData(t),e},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:o.CesiumService}]},t}(n.SimpleDrawerService)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcLayerComponent=void 0;var i=r(9),n=r(0),o=r(7),c=r(2),s=r(14),a=r(4),u=r(20),p=r(26),l=r(18),v=r(11),m=r(17),y=r(27),f=r(25),h=r(16);t.AcLayerComponent=function(){function e(e,t,r,i,n,c,s,a,u,p,l){this.layerService=e,this._computationCache=t,this.show=!0,this._drawerList=[],this._updateStream=new o.Subject,this._drawerList=Array.of(r,i,n,c,s,a,u,p,l)}return e.prototype.init=function(){var e=this;this.initValidParams(),this.observable.merge(this._updateStream).subscribe(function(t){e._computationCache.clear(),e.context[e.entityName]=t.entity,e.layerService.getDescriptions().forEach(function(r){switch(t.actionType){case s.ActionType.ADD_UPDATE:r.draw(e.context,t.id,t.entity);break;case s.ActionType.DELETE:r.remove(t.id);break;default:console.error("unknown action type: "+t.actionType)}})})},e.prototype.initValidParams=function(){if(!this.context)throw"ac-layer: must initialize [context] ";if(!e.acForRgx.test(this.acFor))throw"ac-layer: must initialize [acFor] with a valid syntax ' [acFor]=\"let item of observer$\" ' instead received: "+this.acFor;var t=this.acFor.split(" ");if(this.observable=this.context[t[3]],this.entityName=t[1],!(this.observable&&this.observable instanceof o.Observable))throw"ac-layer: must initailize [acFor] with rx observable, instead received: "+this.observable},e.prototype.ngAfterContentInit=function(){this.init()},e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){if(e.show){var t=e.show.currentValue;this._drawerList.forEach(function(e){return e.setShow(t)})}},e.prototype.removeAll=function(){this.layerService.getDescriptions().forEach(function(e){return e.removeAll()})},e.prototype.remove=function(e){this._updateStream.next({id:e,actionType:s.ActionType.DELETE})},e.prototype.update=function(e){this._updateStream.next(e)},e.prototype.refreshAll=function(e){var t=this;o.Observable.from(e).subscribe(function(e){return t._updateStream.next(e)})},e.acForRgx=/^let\s+.+\s+of\s+.+$/,e.decorators=[{type:n.Component,args:[{selector:"ac-layer",template:"",providers:[c.LayerService,a.ComputationCache,i.BillboardDrawerService,u.LabelDrawerService,l.EllipseDrawerService,v.DynamicEllipseDrawerService,m.DynamicPolylineDrawerService,p.StaticCircleDrawerService,y.StaticPolylineDrawerService,f.PolygonDrawerService,h.ArcDrawerService]}]}],e.ctorParameters=function(){return[{type:c.LayerService},{type:a.ComputationCache},{type:i.BillboardDrawerService},{type:u.LabelDrawerService},{type:l.EllipseDrawerService},{type:v.DynamicEllipseDrawerService},{type:m.DynamicPolylineDrawerService},{type:p.StaticCircleDrawerService},{type:y.StaticPolylineDrawerService},{type:f.PolygonDrawerService},{type:h.ArcDrawerService}]},e.propDecorators={show:[{type:n.Input}],acFor:[{type:n.Input}],context:[{type:n.Input}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoUtilsService=void 0;var i=r(0),n=r(1);t.GeoUtilsService=function(){function e(e){this.cesiumService=e}return e.prototype.pointByLocationDistanceAndAzimuth=function(e,t,r,i){void 0===i&&(i=!1);var n=t/Cesium.Ellipsoid.WGS84.maximumRadius,o=i?Cesium.Cartographic.fromCartesian(e).latitude:e.latitude,c=i?Cesium.Cartographic.fromCartesian(e).longitude:e.longitude,s=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(r)),a=c+Math.atan2(Math.sin(r)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(s));return a=(a+3*Math.PI)%(2*Math.PI)-Math.PI,Cesium.Cartesian3.fromRadians(a,s)},e.prototype.screenPositionToCartesian3=function(e){var t=this.cesiumService.getViewer().camera;return t.pickEllipsoid(e)},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:n.CesiumService}]},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ActionType=void 0;!function(e){e[e.ADD_UPDATE=0]="ADD_UPDATE",e[e.DELETE=1]="DELETE"}(r||(t.ActionType=r={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.MapLayerProviderOptions=void 0;!function(e){e[e.ArcGisMapServer=0]="ArcGisMapServer",e[e.WebMapTileService=1]="WebMapTileService",e[e.WebMapService=2]="WebMapService",e[e.OFFLINE=3]="OFFLINE"}(r||(t.MapLayerProviderOptions=r={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArcDrawerService=void 0;var i=r(0),n=r(6),o=r(1),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.ArcDrawerService=function(e){function t(t){e.call(this,Cesium.PrimitiveCollection,t)}return c(t,e),t.prototype.add=function(t){var r=this.generatePositions(t),i=Cesium.Material.fromType("Color");return i.uniforms.color=t.color||Cesium.Color.WHITE,e.prototype.add.call(this,new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolylineGeometry({positions:r})}),appearance:new Cesium.PolylineMaterialAppearance({material:i})}))},t.prototype.generatePositions=function(e){for(var t=[],r=.004,i=1/(e.granularity||r),n=0;n<i+1;n++){var o=e.angle+e.delta*n/i,c=e.radius/Cesium.Ellipsoid.WGS84.maximumRadius,s=Cesium.Cartographic.fromCartesian(e.center).latitude,a=Cesium.Cartographic.fromCartesian(e.center).longitude,u=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(o)),p=a+Math.atan2(Math.sin(o)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(u));p=(p+3*Math.PI)%(2*Math.PI)-Math.PI,t.push(Cesium.Cartesian3.fromRadians(p,u))}return t},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:o.CesiumService}]},t}(n.SimpleDrawerService)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicPolylineDrawerService=void 0;var i=r(0),n=r(6),o=r(1),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.DynamicPolylineDrawerService=function(e){function t(t){e.call(this,Cesium.PolylineCollection,t)}return c(t,e),t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:o.CesiumService}]},t}(n.SimpleDrawerService)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EllipseDrawerService=void 0;var i=r(0),n=r(1),o=r(10),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.EllipseDrawerService=function(e){function t(t){e.call(this,Cesium.EllipseGeometry,t)}return c(t,e),t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:n.CesiumService}]},t}(o.StaticPrimitiveDrawer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonMapper=void 0;var i=r(0),n=r(57);t.JsonMapper=function(){function e(){this._mapper=new n.JsonStringMapper}return e.prototype.map=function(e){return this._mapper.map(e)},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelDrawerService=void 0;var i=r(0),n=r(1),o=r(6),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.LabelDrawerService=function(e){function t(t){e.call(this,Cesium.LabelCollection,t)}return c(t,e),t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:n.CesiumService}]},t}(o.SimpleDrawerService)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CesiumEventBuilder=void 0;var i=r(1),n=r(23),o=r(0),c=r(22),s=r(51);t.CesiumEventBuilder=function(){function e(e){this.cesiumEventsObservables=new Map,this.eventsHandler=e.getViewer().screenSpaceEventHandler}return e.prototype.get=function(t,r){void 0===r&&(r=void 0);var i=e.getEventFullName(t,r);if(this.cesiumEventsObservables.has(i))return this.cesiumEventsObservables.get(i);var n=this.createCesiumEventObservable(t,r);return this.cesiumEventsObservables.set(i,n),n},e.getEventFullName=function(e,t){return t?e+"_"+t:e.toString()},e.prototype.createCesiumEventObservable=function(t,r){var i=void 0;return i=e.longPressEvents.has(t)?this.createSpecialCesiumEventObservable(t,r):new c.CesiumPureEventObserver(t,r).init(this.eventsHandler).publish(),i.connect(),i},e.prototype.createSpecialCesiumEventObservable=function(e,t){return new s.CesiumLongPressObserver(e,t,this).init()},e.longPressEvents=new Set([n.CesiumEvent.LONG_LEFT_PRESS,n.CesiumEvent.LONG_RIGHT_PRESS,n.CesiumEvent.LONG_MIDDLE_PRESS]),e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:i.CesiumService}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CesiumPureEventObserver=void 0;var i=r(7);t.CesiumPureEventObserver=function(){function e(e,t){this.event=e,this.modifier=t}return e.prototype.init=function(e){var t=this;return this.observer=i.Observable.create(function(r){e.setInputAction(function(e){e.position&&(e.startPosition=e.position,e.endPosition=e.position),r.next(e)},t.event,t.modifier)}),this.observer},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.CesiumEvent=void 0;!function(e){e[e.MOUSE_MOVE=Cesium.ScreenSpaceEventType.MOUSE_MOVE]="MOUSE_MOVE",e[e.LEFT_CLICK=Cesium.ScreenSpaceEventType.LEFT_CLICK]="LEFT_CLICK",e[e.LEFT_DOUBLE_CLICK=Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK]="LEFT_DOUBLE_CLICK",e[e.LEFT_DOWN=Cesium.ScreenSpaceEventType.LEFT_DOWN]="LEFT_DOWN",e[e.LEFT_UP=Cesium.ScreenSpaceEventType.LEFT_UP]="LEFT_UP",e[e.MIDDLE_CLICK=Cesium.ScreenSpaceEventType.MIDDLE_CLICK]="MIDDLE_CLICK",e[e.MIDDLE_DOUBLE_CLICK=Cesium.ScreenSpaceEventType.MIDDLE_DOUBLE_CLICK]="MIDDLE_DOUBLE_CLICK",e[e.MIDDLE_DOWN=Cesium.ScreenSpaceEventType.MIDDLE_DOWN]="MIDDLE_DOWN",e[e.MIDDLE_UP=Cesium.ScreenSpaceEventType.MIDDLE_UP]="MIDDLE_UP",e[e.PINCH_START=Cesium.ScreenSpaceEventType.PINCH_START]="PINCH_START",e[e.PINCH_END=Cesium.ScreenSpaceEventType.PINCH_END]="PINCH_END",e[e.PINCH_MOVE=Cesium.ScreenSpaceEventType.PINCH_MOVE]="PINCH_MOVE",e[e.RIGHT_CLICK=Cesium.ScreenSpaceEventType.RIGHT_CLICK]="RIGHT_CLICK",e[e.RIGHT_DOUBLE_CLICK=Cesium.ScreenSpaceEventType.RIGHT_DOUBLE_CLICK]="RIGHT_DOUBLE_CLICK",e[e.RIGHT_DOWN=Cesium.ScreenSpaceEventType.RIGHT_DOWN]="RIGHT_DOWN",e[e.RIGHT_UP=Cesium.ScreenSpaceEventType.RIGHT_UP]="RIGHT_UP",e[e.WHEEL=Cesium.ScreenSpaceEventType.WHEEL]="WHEEL",e[e.LONG_LEFT_PRESS=110]="LONG_LEFT_PRESS",e[e.LONG_RIGHT_PRESS=111]="LONG_RIGHT_PRESS",e[e.LONG_MIDDLE_PRESS=112]="LONG_MIDDLE_PRESS"}(r||(t.CesiumEvent=r={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlonterService=void 0;var i=r(0),n=r(7);t.PlonterService=function(){function e(){this._entitesToPlonter=[],this._plonterChangeNotifier=new i.EventEmitter,this._plonterObserver=new n.Subject}return Object.defineProperty(e.prototype,"plonterChangeNotifier",{get:function(){return this._plonterChangeNotifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plonterShown",{get:function(){return this._plonterShown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entitesToPlonter",{get:function(){return this._entitesToPlonter},enumerable:!0,configurable:!0}),e.prototype.plonterIt=function(e){return this._eventResult=e,this._entitesToPlonter=e.entities,this._plonterShown=!0,this._plonterChangeNotifier.emit(),this._plonterObserver},e.prototype.resolvePlonter=function(e){this._plonterShown=!1,this._eventResult.entities=[e],this._plonterChangeNotifier.emit(),this._plonterObserver.next(this._eventResult)},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolygonDrawerService=void 0;var i=r(0),n=r(1),o=r(10),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.PolygonDrawerService=function(e){function t(t){e.call(this,Cesium.PolygonGeometry,t)}return c(t,e),t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:n.CesiumService}]},t}(o.StaticPrimitiveDrawer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaticCircleDrawerService=void 0;var i=r(0),n=r(1),o=r(10),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.StaticCircleDrawerService=function(e){function t(t){e.call(this,Cesium.CircleGeometry,t)}return c(t,e),t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:n.CesiumService}]},t}(o.StaticPrimitiveDrawer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaticPolylineDrawerService=void 0;var i=r(0),n=r(1),o=r(10),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.StaticPolylineDrawerService=function(e){function t(t){e.call(this,Cesium.PolylineGeometry,t)}return c(t,e),t.prototype.update=function(e,t,r,i){var n=r.attributes.color.value;return e.ready?e.getGeometryInstanceAttributes().color=n:Cesium.when(e.readyPromise).then(function(e){e.getGeometryInstanceAttributes().color.value=n}),e},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:n.CesiumService}]},t}(o.StaticPrimitiveDrawer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerFactory=void 0;var i=r(0);t.ViewerFactory=function(){function e(){this.cesium=Cesium}return e.prototype.createViewer=function(e,t){return window.CESIUM_BASE_URL="/node_modules/cesium/Build/Cesium",t?new this.cesium.Viewer(e,t):new this.cesium.Viewer(e,{imageryProvider:Cesium.createTileMapServiceImageryProvider({url:Cesium.buildModuleUrl("Assets/Textures/NaturalEarthII")}),baseLayerPicker:!1,geocoder:!1})},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Checker=function(){function e(){}return e.throwIfAnyNotPresent=function(t,r){r.forEach(function(r){return e.throwIfNotPresent(t,r)})},e.throwIfNotPresent=function(t,r){if(!e.present(t[r]))throw"Error: "+r+" was not given."},e.present=function(e){return void 0!==e&&null!==e},e}()},function(e,t){e.exports=require("@angular/common")},function(e,t){e.exports=require("angular2parse")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AngularCesiumModule=void 0;var i=r(0),n=r(30),o=r(42),c=r(12),s=r(35),a=r(36),u=r(44),p=r(38),l=r(39),v=r(43),m=r(45),y=r(47),f=r(31),h=r(50),d=r(19),C=r(3),P=r(40),_=r(54),S=r(46),b=r(28),D=r(13),E=r(37),O=r(34),g=r(41);t.AngularCesiumModule=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule,f.Angular2ParseModule,_.UtilsModule],declarations:[o.AcMapComponent,c.AcLayerComponent,s.AcBillboardComponent,a.AcBillboardDescComponent,P.AcLabelDescComponent,u.AcStaticEllipseDescComponent,p.AcDynamicEllipseDescComponent,l.AcDynamicPolylineDescComponent,m.AcStaticPolygonDescComponent,y.AcLayer2Directive,h.PixelOffsetPipe,v.AcStaticCircleDescComponent,E.AcDynamicCircleDescComponent,S.AcStaticPolylineDescComponent,O.AcArcDescComponent,g.AcMapLayerProviderComponent],exports:[o.AcMapComponent,s.AcBillboardComponent,a.AcBillboardDescComponent,P.AcLabelDescComponent,u.AcStaticEllipseDescComponent,p.AcDynamicEllipseDescComponent,l.AcDynamicPolylineDescComponent,m.AcStaticPolygonDescComponent,c.AcLayerComponent,y.AcLayer2Directive,v.AcStaticCircleDescComponent,E.AcDynamicCircleDescComponent,S.AcStaticPolylineDescComponent,O.AcArcDescComponent,g.AcMapLayerProviderComponent],providers:[d.JsonMapper,C.CesiumProperties,D.GeoUtilsService,b.ViewerFactory]}]}],e.ctorParameters=function(){return[]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(49);Object.defineProperty(t,"AcEntity",{enumerable:!0,get:function(){return i.AcEntity}});var n=r(14);Object.defineProperty(t,"ActionType",{enumerable:!0,get:function(){return n.ActionType}});var o=r(15);Object.defineProperty(t,"MapLayerProviderOptions",{enumerable:!0,get:function(){return o.MapLayerProviderOptions}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcArcDescComponent=void 0;var i=r(0),n=r(2),o=r(3),c=r(4),s=r(16),a=r(5),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcArcDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-arc-desc",template:""}]}],t.ctorParameters=function(){return[{type:s.ArcDrawerService},{type:n.LayerService},{type:c.ComputationCache},{type:o.CesiumProperties}]},t}(a.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcBillboardComponent=void 0;var i=r(0),n=r(9);t.AcBillboardComponent=function(){function e(e){this.billboardDrawer=e,this.key=Symbol()}return e.prototype.ngOnChanges=function(e){var t=e.props;t.currentValue!==t.previousValue},e.decorators=[{type:i.Component,args:[{selector:"ac-billboard",template:""}]}],e.ctorParameters=function(){return[{type:n.BillboardDrawerService}]},e.propDecorators={props:[{type:i.Input}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcBillboardDescComponent=void 0;var i=r(0),n=r(5),o=r(2),c=r(9),s=r(4),a=r(3),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcBillboardDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-billboard-desc",template:""}]}],t.ctorParameters=function(){return[{type:c.BillboardDrawerService},{type:o.LayerService},{type:s.ComputationCache},{type:a.CesiumProperties}]},t}(n.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcDynamicCircleDescComponent=void 0;var i=r(0),n=r(3),o=r(4),c=r(2),s=r(5),a=r(11),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcDynamicCircleDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.prototype._propsEvaluator=function(t){var r=e.prototype._propsEvaluator.call(this,t);return r.semiMajorAxis=r.radius,r.semiMinorAxis=r.radius,r},t.decorators=[{type:i.Component,args:[{selector:"ac-dynamic-circle-desc",template:""}]}],t.ctorParameters=function(){return[{type:a.DynamicEllipseDrawerService},{type:c.LayerService},{type:o.ComputationCache},{type:n.CesiumProperties}]},t}(s.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcDynamicEllipseDescComponent=void 0;var i=r(0),n=r(3),o=r(4),c=r(2),s=r(5),a=r(11),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcDynamicEllipseDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-dynamic-ellipse-desc",template:""}]}],t.ctorParameters=function(){return[{type:a.DynamicEllipseDrawerService},{type:c.LayerService},{type:o.ComputationCache},{type:n.CesiumProperties}]},t}(s.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcDynamicPolylineDescComponent=void 0;var i=r(0),n=r(5),o=r(2),c=r(17),s=r(4),a=r(3),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcDynamicPolylineDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-dynamic-polyline-desc",template:""}]}],t.ctorParameters=function(){return[{type:c.DynamicPolylineDrawerService},{type:o.LayerService},{type:s.ComputationCache},{type:a.CesiumProperties}]},t}(n.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcLabelDescComponent=void 0;var i=r(0),n=r(5),o=r(3),c=r(4),s=r(2),a=r(20),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcLabelDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-label-desc",template:""}]}],t.ctorParameters=function(){return[{type:a.LabelDrawerService},{type:s.LayerService},{type:c.ComputationCache},{type:o.CesiumProperties}]},t}(n.BasicDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcMapLayerProviderComponent=void 0;var i=r(0),n=r(1),o=r(15),c=r(29);t.AcMapLayerProviderComponent=function(){function e(e){this.cesiumService=e,this.options={},this.provider=o.MapLayerProviderOptions.OFFLINE}return e.prototype.ngOnInit=function(){if(!c.Checker.present(this.options.url)&&this.provider!==o.MapLayerProviderOptions.OFFLINE)throw"options must have a url";
var t;switch(this.provider){case o.MapLayerProviderOptions.WebMapService:t=e.createWebMapServiceProvider(this.options);break;case o.MapLayerProviderOptions.WebMapTileService:t=e.createWebMapTileServiceProvider(this.options);break;case o.MapLayerProviderOptions.ArcGisMapServer:t=e.createArcGisMapServerProvider(this.options);break;case o.MapLayerProviderOptions.OFFLINE:break;default:t=e.createOfflineMapProvider()}this.cesiumService.getScene().imageryLayers.addImageryProvider(t,this.index)},e.createWebMapServiceProvider=function(e){return new Cesium.WebMapServiceImageryProvider(e)},e.createWebMapTileServiceProvider=function(e){return new Cesium.WebMapTileServiceImageryProvider(e)},e.createArcGisMapServerProvider=function(e){return new Cesium.ArcGisMapServerImageryProvider(e)},e.createOfflineMapProvider=function(){return Cesium.createTileMapServiceImageryProvider({url:Cesium.buildModuleUrl("Assets/Textures/NaturalEarthII")})},e.decorators=[{type:i.Component,args:[{selector:"ac-map-layer-provider",template:""}]}],e.ctorParameters=function(){return[{type:n.CesiumService}]},e.propDecorators={options:[{type:i.Input}],provider:[{type:i.Input}],index:[{type:i.Input}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcMapComponent=void 0;var i=r(0),n=r(56),o=r(1),c=r(9),s=r(53),a=r(21),u=r(24);t.AcMapComponent=function(){function e(t,r,i){this._cesiumService=t,this._elemRef=r,this.document=i,this.minimumZoom=e.DEFAULT_MINIMUM_ZOOM,this.maximumZoom=e.DEFAULT_MAXIMUM_ZOOM,this.enableTilt=e.DEFAULT_TILT_ENABLE;var n=this.document.createElement("div");this._elemRef.nativeElement.appendChild(n),this._cesiumService.init(n)}return e.prototype.ngOnInit=function(){this._cesiumService.setMinimumZoom(this.minimumZoom),this._cesiumService.setMaximumZoom(this.maximumZoom),this._cesiumService.setEnableTilt(this.enableTilt)},e.DEFAULT_MINIMUM_ZOOM=1,e.DEFAULT_MAXIMUM_ZOOM=Number.POSITIVE_INFINITY,e.DEFAULT_TILT_ENABLE=!0,e.decorators=[{type:i.Component,args:[{selector:"ac-map",template:"<ng-content></ng-content>",providers:[o.CesiumService,c.BillboardDrawerService,a.CesiumEventBuilder,s.MapEventsManagerService,u.PlonterService]}]}],e.ctorParameters=function(){return[{type:o.CesiumService},{type:i.ElementRef},{type:void 0,decorators:[{type:i.Inject,args:[n.DOCUMENT]}]}]},e.propDecorators={minimumZoom:[{type:i.Input}],maximumZoom:[{type:i.Input}],enableTilt:[{type:i.Input}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcStaticCircleDescComponent=void 0;var i=r(0),n=r(2),o=r(26),c=r(4),s=r(3),a=r(8),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcStaticCircleDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-static-circle",template:""}]}],t.ctorParameters=function(){return[{type:o.StaticCircleDrawerService},{type:n.LayerService},{type:c.ComputationCache},{type:s.CesiumProperties}]},t}(a.BasicStaticPrimitiveDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcStaticEllipseDescComponent=void 0;var i=r(0),n=r(2),o=r(18),c=r(4),s=r(3),a=r(8),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcStaticEllipseDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-static-ellipse-desc",template:""}]}],t.ctorParameters=function(){return[{type:o.EllipseDrawerService},{type:n.LayerService},{type:c.ComputationCache},{type:s.CesiumProperties}]},t}(a.BasicStaticPrimitiveDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcStaticPolygonDescComponent=void 0;var i=r(0),n=r(2),o=r(25),c=r(4),s=r(3),a=r(8),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcStaticPolygonDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-static-polygon-desc",template:""}]}],t.ctorParameters=function(){return[{type:o.PolygonDrawerService},{type:n.LayerService},{type:c.ComputationCache},{type:s.CesiumProperties}]},t}(a.BasicStaticPrimitiveDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcStaticPolylineDescComponent=void 0;var i=r(0),n=r(27),o=r(2),c=r(3),s=r(4),a=r(8),u=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.AcStaticPolylineDescComponent=function(e){function t(t,r,i,n){e.call(this,t,r,i,n)}return u(t,e),t.decorators=[{type:i.Component,args:[{selector:"ac-static-polyline-desc",template:""}]}],t.ctorParameters=function(){return[{type:n.StaticPolylineDrawerService},{type:o.LayerService},{type:s.ComputationCache},{type:c.CesiumProperties}]},t}(a.BasicStaticPrimitiveDesc)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcLayer2Directive=t.LayerData=void 0;var i=r(2),n=r(0),o=t.LayerData=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.entity=e,this.$implicit=t}return e}();t.AcLayer2Directive=function(){function e(e,t,r,i){this.templateRef=e,this.viewContainerRef=t,this.changeDetector=r,this.layerService=i}return Object.defineProperty(e.prototype,"acLayer2Of",{set:function(e){var t=this;if(!this._observable){var r=null;this._observable=e;var i=new o;e.subscribe(function(e){r||(r=t.viewContainerRef.createEmbeddedView(t.templateRef,i)),i.$implicit=e,i.entity=e.entity,t.changeDetector.detectChanges()})}},enumerable:!0,configurable:!0}),e.decorators=[{type:n.Directive,args:[{selector:"[acLayer2]"}]}],e.ctorParameters=function(){return[{type:n.TemplateRef},{type:n.ViewContainerRef},{type:n.ChangeDetectorRef},{type:i.LayerService}]},e.propDecorators={acLayer2Of:[{type:n.Input}]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(32);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var n=r(33);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(12);Object.defineProperty(t,"AcLayerComponent",{enumerable:!0,get:function(){return o.AcLayerComponent}});var c=r(13);Object.defineProperty(t,"GeoUtilsService",{enumerable:!0,get:function(){return c.GeoUtilsService}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AcEntity=function(){function e(){}return e.create=function(t){return t?Object.assign(new e,t):new e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixelOffsetPipe=void 0;var i=r(0);t.PixelOffsetPipe=function(){function e(){}return e.prototype.transform=function(e,t){return new Cesium.Cartesian2(e[0],e[1])},e.decorators=[{type:i.Pipe,args:[{name:"pixelOffset"}]}],e.ctorParameters=function(){return[]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CesiumLongPressObserver=void 0;var i=r(22),n=r(23),o=r(7),c=function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.CesiumLongPressObserver=function(e){function t(t,r,i){e.call(this,t,r),this.event=t,this.modifier=r,this.eventFactory=i}return c(t,e),t.prototype.init=function(){var e,r;this.event===n.CesiumEvent.LONG_LEFT_PRESS?(e=n.CesiumEvent.LEFT_DOWN,r=n.CesiumEvent.LEFT_UP):this.event===n.CesiumEvent.LONG_RIGHT_PRESS?(e=n.CesiumEvent.RIGHT_DOWN,r=n.CesiumEvent.RIGHT_UP):this.event===n.CesiumEvent.LONG_MIDDLE_PRESS&&(e=n.CesiumEvent.MIDDLE_DOWN,r=n.CesiumEvent.MIDDLE_UP);var i=this.eventFactory.get(e,this.modifier),c=this.eventFactory.get(r,this.modifier),s=i.flatMap(function(e){return o.Observable.of(e).delay(t.LONG_PRESS_EVENTS_DURATION).takeUntil(c)}).publish();return s},t.LONG_PRESS_EVENTS_DURATION=250,t}(i.CesiumPureEventObserver)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.PickOptions=void 0;!function(e){e[e.NO_PICK=0]="NO_PICK",e[e.PICK_FIRST=1]="PICK_FIRST",e[e.PICK_ONE=2]="PICK_ONE",e[e.PICK_ALL=3]="PICK_ALL"}(r||(t.PickOptions=r={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapEventsManagerService=void 0;var i=r(0),n=r(7),o=r(1),c=r(21),s=r(52),a=r(55),u=r(24),p=(t.MapEventsManagerService=function(){function e(e,t,r){this.eventBuilder=t,this.plonterService=r,this.eventRegistrations=new Map,this.scene=e.getScene()}return e.prototype.register=function(e){var t=this;if(void 0===this.scene)throw"CesiumService has not been initialized yet - MapEventsManagerService must be injected  under ac-map";if(e.pick=e.pick||s.PickOptions.NO_PICK,e.priority=e.priority||0,e.entityType&&e.pick===s.PickOptions.NO_PICK)throw"MapEventsManagerService: can't register an event with entityType and PickOptions.NO_PICK - It doesn't make sense ";var r=c.CesiumEventBuilder.getEventFullName(e.event,e.modifier);this.eventRegistrations.has(r)||this.eventRegistrations.set(r,[]);var i=this.createEventRegistration(e.event,e.modifier,e.entityType,e.pick,e.priority),n=i.observable;return n.dispose=function(){return t.disposeObservable(i,r)},this.eventRegistrations.get(r).push(i),this.sortRegistrationsByPriority(r),n},e.prototype.disposeObservable=function(e,t){e.stopper.next(1);var r=this.eventRegistrations.get(t),i=r.indexOf(e);i!==-1&&r.splice(i,1),this.sortRegistrationsByPriority(t)},e.prototype.sortRegistrationsByPriority=function(e){var t=this.eventRegistrations.get(e);if(t.sort(function(e,t){return t.priority-e.priority}),0!==t.length){var r=t[0].priority;t.forEach(function(e){e.isPaused=e.priority<r})}},e.prototype.createEventRegistration=function(e,t,r,i,o){var c,s=this,a=this.eventBuilder.get(e,t),u=new n.Subject,l=new p((void 0),u,o,(!1));return c=a.filter(function(){return!l.isPaused}).map(function(e){return s.triggerPick(e,i)}).filter(function(e){return null!==e.primitives}).map(function(e){return s.addEntities(e,r,i)}).filter(function(e){return null!==e.entities}).switchMap(function(e){return s.plonter(e,i)}).takeUntil(u),l.observable=c,l},e.prototype.triggerPick=function(e,t){var r=[];switch(t){case s.PickOptions.PICK_ONE:case s.PickOptions.PICK_ALL:r=this.scene.drillPick(e.endPosition),r=0===r.length?null:r;break;case s.PickOptions.PICK_FIRST:var i=this.scene.pick(e.endPosition);r=void 0===i?null:[i];break;case s.PickOptions.NO_PICK:}return{movement:e,primitives:r}},e.prototype.addEntities=function(e,t,r){var i=[];return r!==s.PickOptions.NO_PICK&&(i=t?e.primitives.map(function(e){return e.primitive.acEntity}).filter(function(e){return e&&e instanceof t}):e.primitives.map(function(e){return e.primitive.acEntity}),i=a.UtilsService.unique(i),0===i.length&&(i=null)),Object.assign(e,{entities:i})},e.prototype.plonter=function(e,t){return t===s.PickOptions.PICK_ONE&&e.entities.length>1?this.plonterService.plonterIt(e):n.Observable.of(e)},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:o.CesiumService},{type:c.CesiumEventBuilder},{type:u.PlonterService}]},e}(),function(){function e(e,t,r,i){this.observable=e,this.stopper=t,this.priority=r,this.isPaused=i}return e}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UtilsModule=void 0;var i=r(0),n=r(30);t.UtilsModule=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule],providers:[]}]}],e.ctorParameters=function(){return[]},e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UtilsService=function(){function e(){}return e.unique=function(e){return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])},e}()},function(e,t){e.exports=require("@angular/platform-browser")},function(e,t){e.exports=require("json-string-mapper")},function(e,t){e.exports=require("primitive-primitives")}])});
//# sourceMappingURL=angular2-cesium.umd.js.map