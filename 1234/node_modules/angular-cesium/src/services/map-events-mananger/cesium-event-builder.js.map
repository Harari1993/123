{"version":3,"file":"cesium-event-builder.js","sourceRoot":"","sources":["cesium-event-builder.ts"],"names":[],"mappings":"OAAO,EAAE,aAAa,EAAE,MAAM,0BAA0B;OACjD,EAAE,WAAW,EAAE,MAAM,4BAA4B;OAEjD,EAAE,UAAU,EAAE,MAAM,eAAe;OACnC,EAAE,uBAAuB,EAAE,MAAM,8BAA8B;OAC/D,EAAE,uBAAuB,EAAE,MAAM,8BAA8B;AAItE;IAmBC,4BAAY,aAA4B;QAFhC,4BAAuB,GAAG,IAAI,GAAG,EAAsC,CAAC;QAG/E,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC,SAAS,EAAE,CAAC,uBAAuB,CAAC;IACxE,CAAC;IApBa,mCAAgB,GAA9B,UAA+B,KAAkB,EAAE,QAA8B;QAChF,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACd,MAAM,CAAI,KAAK,SAAI,QAAU,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,CAAC;YACL,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACzB,CAAC;IACF,CAAC;IAeD,gCAAG,GAAH,UAAI,KAAkB,EAAE,QAAyC;QAAzC,wBAAyC,GAAzC,oBAAyC;QAChE,IAAM,SAAS,GAAG,kBAAkB,CAAC,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACvE,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YACjD,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QAAC,IAAI,CAAC,CAAC;YACP,IAAM,aAAa,GAAG,IAAI,CAAC,2BAA2B,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YACxE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;YAC3D,MAAM,CAAC,aAAa,CAAC;QACtB,CAAC;IACF,CAAC;IAEO,wDAA2B,GAAnC,UAAoC,KAAkB,EAAE,QAA8B;QACrF,IAAI,qBAAqB,GAA+B,SAAS,CAAC;QAClE,EAAE,CAAC,CAAC,kBAAkB,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACnD,qBAAqB,GAAG,IAAI,CAAC,kCAAkC,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAClF,CAAC;QACD,IAAI,CAAC,CAAC;YACL,qBAAqB,GAAG,IAAI,uBAAuB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,EAAE,CAAC;QACzG,CAAC;QACD,qBAAqB,CAAC,OAAO,EAAE,CAAC;QAChC,MAAM,CAAC,qBAAqB,CAAC;IAC9B,CAAC;IAEO,+DAAkC,GAA1C,UAA2C,KAAkB,EAAE,QAA6B;QAE3F,MAAM,CAAC,IAAI,uBAAuB,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC;IAClE,CAAC;IAvCa,kCAAe,GAAqB,IAAI,GAAG,CAAC;QACzD,WAAW,CAAC,eAAe;QAC3B,WAAW,CAAC,gBAAgB;QAC5B,WAAW,CAAC,iBAAiB;KAC7B,CAAC,CAAC;IAoCG,6BAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;KACnB,CAAC;IAEK,iCAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,aAAa,GAAG;KACtB,EAF6F,CAE7F,CAAC;IACF,yBAAC;AAAD,CAAC,AAzDD,IAyDC","sourcesContent":["import { CesiumService } from '../cesium/cesium.service';\nimport { CesiumEvent } from './consts/cesium-event.enum';\nimport { CesiumEventModifier } from './consts/cesium-event-modifier.enum';\nimport { Injectable } from '@angular/core';\nimport { CesiumPureEventObserver } from './cesium-pure-event-observer';\nimport { CesiumLongPressObserver } from './cesium-long-press-observer';\nimport { ConnectableObservable } from 'rxjs/observable/ConnectableObservable';\n\n\nexport class CesiumEventBuilder {\n\tpublic static getEventFullName(event: CesiumEvent, modifier?: CesiumEventModifier): string {\n\t\tif (modifier) {\n\t\t\treturn `${event}_${modifier}`;\n\t\t}\n\t\telse {\n\t\t\treturn event.toString();\n\t\t}\n\t}\n\n\tpublic static longPressEvents: Set<CesiumEvent> = new Set([\n\t\tCesiumEvent.LONG_LEFT_PRESS,\n\t\tCesiumEvent.LONG_RIGHT_PRESS,\n\t\tCesiumEvent.LONG_MIDDLE_PRESS\n\t]);\n\n\tprivate eventsHandler: any;\n\tprivate cesiumEventsObservables = new Map<string, ConnectableObservable<any>>();\n\n\tconstructor(cesiumService: CesiumService) {\n\t\tthis.eventsHandler = cesiumService.getViewer().screenSpaceEventHandler;\n\t}\n\n\tget(event: CesiumEvent, modifier: CesiumEventModifier = undefined): ConnectableObservable<any> {\n\t\tconst eventName = CesiumEventBuilder.getEventFullName(event, modifier);\n\t\tif (this.cesiumEventsObservables.has(eventName)) {\n\t\t\treturn this.cesiumEventsObservables.get(eventName);\n\t\t} else {\n\t\t\tconst eventObserver = this.createCesiumEventObservable(event, modifier);\n\t\t\tthis.cesiumEventsObservables.set(eventName, eventObserver);\n\t\t\treturn eventObserver;\n\t\t}\n\t}\n\n\tprivate createCesiumEventObservable(event: CesiumEvent, modifier?: CesiumEventModifier): ConnectableObservable<any> {\n\t\tlet cesiumEventObservable: ConnectableObservable<any> = undefined;\n\t\tif (CesiumEventBuilder.longPressEvents.has(event)) {\n\t\t\tcesiumEventObservable = this.createSpecialCesiumEventObservable(event, modifier);\n\t\t}\n\t\telse {\n\t\t\tcesiumEventObservable = new CesiumPureEventObserver(event, modifier).init(this.eventsHandler).publish();\n\t\t}\n\t\tcesiumEventObservable.connect();\n\t\treturn cesiumEventObservable;\n\t}\n\n\tprivate createSpecialCesiumEventObservable(event: CesiumEvent, modifier: CesiumEventModifier): ConnectableObservable<any> {\n\t\t// could support more events if needed\n\t\treturn new CesiumLongPressObserver(event, modifier, this).init();\n\t}\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: CesiumService, },\n];\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}